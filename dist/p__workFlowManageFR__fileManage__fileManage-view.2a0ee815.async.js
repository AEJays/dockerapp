(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[170],{"034Z":function(e){e.exports=JSON.parse('{"pageName":{"table":"\u8868\u5355\u6a21\u677f\u7ba1\u7406","new":"","edit":""},"listAPI":"/api/doc","createAPI":"/api/doc","getAPI":"/api/doc/[id]","updateAPI":"/api/doc/[id]","deleteAPI":"/api/doc/(id)","getApplyHistoryAPI":"/api/wf/histories","columns":1,"createFields":[{"label":"\u4e0a\u4f20\u6587\u4ef6","span":16,"rules":[{"type":"required"}],"field":"urlList","type":"upload_file_single","options":{"title":"\u70b9\u51fb\u4e0a\u4f20","API":"/api/fs/uploadfile","acceptType":".docx"},"expect":{}}],"updateFields":[{"field":"entityId","label":"\u8868\u5355","type":"modal-radio","props":{},"rules":[],"options":{"title":"\u9009\u62e9\u8868\u5355","label":"name","editLabel":"entityName","value":"id","pagination":true,"API":"/api/eav/entities","fields":[{"label":"\u8868\u5355\u540d\u79f0","field":"name"},{"label":"\u5907\u6ce8","field":"note"}]}},{"label":"\u4e0a\u4f20\u6587\u4ef6","rules":[{"type":"required"}],"field":"urlList","span":16,"type":"upload_file_single","options":{"title":"\u70b9\u51fb\u4e0a\u4f20","API":"/api/fs/uploadfile","acceptType":".docx"},"expect":{}}],"map":{},"layout":{"table":"Content","form":"TitleContent"},"tableActions":[{"title":"\u65b0\u589e\u6253\u5370\u6a21\u677f","type":"modal","options":{"style":"primary","modalTitle":"\u6dfb\u52a0\u7c7b\u522b","modalWidth":600,"items":[{"component":"Form","config":{"layout":"Grid","layoutConfig":{"value":[24]},"API":{"createAPI":"/api/doc"},"fields":[{"label":"\u4e0a\u4f20\u6587\u4ef6","span":16,"rules":[{"type":"required"}],"field":"urlList","type":"upload_file_single","options":{"title":"\u70b9\u51fb\u4e0a\u4f20","API":"/api/fs/uploadfile","acceptType":".docx, .doc"},"expect":{}}]}}]}}],"tableOperation":[{"title":"\u4e0a\u4f20pdf","type":"modal","options":{"outside":true,"style":"primary","modalTitle":"\u4e0a\u4f20pdf","modalWidth":600,"items":[{"component":"Form","config":{"layout":"Grid","layoutConfig":{"value":[24]},"API":{"getAPI":"/api/doc/(id)","updateAPI":"/api/doc/(id)"},"fields":[{"label":"\u4e0a\u4f20\u6587\u4ef6","span":16,"rules":[{"type":"required"}],"field":"pdfUrl","type":"upload_file_single","options":{"title":"\u70b9\u51fb\u4e0a\u4f20","type":"string","API":"/api/fs/uploadfile","acceptType":".pdf"},"expect":{}}]}}]}},{"title":"\u66f4\u65b0\u6587\u6863","type":"modal","options":{"outside":true,"style":"primary","modalTitle":"\u66f4\u65b0\u6587\u6863","modalWidth":600,"items":[{"component":"Form","config":{"layout":"Grid","layoutConfig":{"value":[24]},"API":{"getAPI":"/api/doc/(id)","updateAPI":"/api/doc/(id)"},"fields":[{"label":"\u6587\u6863\u540d","field":"name","rules":[{"type":"required"}],"type":"input"},{"label":"\u4e0a\u4f20\u6587\u4ef6","span":16,"rules":[],"field":"urlList","type":"upload_file_single","options":{"title":"\u70b9\u51fb\u4e0a\u4f20","API":"/api/fs/uploadfile","acceptType":".docx, .doc"},"expect":{}}]}}]}},{"title":"\u4e0b\u8f7d","type":"modal","options":{"outside":true,"modalTitle":"\u4e0b\u8f7d\u6587\u4ef6","modalWidth":400,"layout":"Empty","items":[{"component":"print_config_form","config":{"API":{"getAPI":"/api/doc/(id)"},"fields":[{"field":"downloadFile","label":"\u4e0b\u8f7d","type":"normal_download_file","options":{"title":"\u70b9\u51fb\u4e0b\u8f7d"}}],"otherProps":{"footerButton":false}}}]}},{"title":"\u8be6\u60c5","type":"path","options":{"outside":true,"path":"fileManage/fileManage-view"}},{"title":"\u5220\u9664","type":"delete","options":{"outside":false},"expect":{"permission":""}}],"searchFields":[{"label":"\u6587\u6863\u540d","field":"name","type":"input","props":{"placeholder":""}}],"tableFields":[{"label":"\u6587\u6863\u540d","field":"name"},{"label":"\u6587\u4ef6\u7248\u672c","field":"version"}],"viewConfig":[{"title":"\u8be6\u60c5","type":"plain","fields":[{"label":"\u6587\u6863\u540d","field":"name"},{"label":"\u4e0b\u8f7d\u5730\u5740","field":"url"},{"label":"\u5f53\u524d\u7248\u672c\u53f7","field":"version"}]},{"title":"\u5386\u53f2\u7248\u672c","type":"cardList","api":"/api/doc/versionList/[id]","map":{"title":"","subTitle":false,"image":false,"imageTitle":false},"format":["\u6587\u6863\u540d: <title>","\u4e0b\u8f7d\u5730\u5740: <url>","\u66f4\u65b0\u65f6\u95f4: <uploadTime>","\u6587\u4ef6\u7248\u672c: <versionCode>"]}]}')},AyJi:function(e,a,t){"use strict";var l=t("IIKO"),i=t("SIvP"),n=t("k16G"),o=t("q1tI"),r=t.n(o),c=t("uuO6"),d=(t("Mdr6"),c["Flex"].FlexItem),s=function(e){var a=e.title,t=e.children,l=r.a.Children.toArray(t),i=Object(n["a"])(l,2),o=i[0],s=i[1];return r.a.createElement("div",{className:"c-Card"},r.a.createElement(c["Flex"],{className:"content"},r.a.createElement(d,null,r.a.createElement("div",{className:"title"},a)),r.a.createElement("div",{className:"fill"}),r.a.createElement(d,{flex:1},s)),o)},m=t("G1nR"),p=t("GG5U"),u=t("Pm34"),f=t.n(u),v=t("8Skl"),g=(t("T65D"),c["Flex"].FlexItem);function b(e){var a=e.title,t=e.defaultCollapse,l=void 0!==t&&t,i=e.collapseIcon,d=void 0===i||i,s=e.delayed,m=void 0!==s&&s,p=e.children,u=Object(o["useState"])(l),f=Object(n["a"])(u,2),b=f[0],E=f[1],y=Object(o["useReducer"])(e=>e+1,0),I=Object(n["a"])(y,2),A=I[0],O=I[1],P=Object(o["useRef"])(null),x=Object(o["useRef"])(void 0),j=Object(o["useMemo"])(e=>b?[{height:0,padding:0},{transform:"rotate(180deg)"}]:[{height:x.current,padding:void 0},{transform:void 0}],[b,A]),h=Object(n["a"])(j,2),F=h[0],T=h[1];function N(){b||(x.current=P.current.clientHeight),E(!b)}return Object(o["useEffect"])(e=>{b||setTimeout(e=>{x.current=void 0,O()},200)},[b]),r.a.createElement("div",{className:"ZEleA-Panel"},r.a.createElement(c["Flex"],{className:"ZEleA-Panel-title"},d?r.a.createElement(g,{className:"ZEleA-Panel-icon",onClick:N,style:T},r.a.createElement(v["a"],{type:"down"})):null,r.a.createElement(g,{flex:1},r.a.createElement("div",null,a))),r.a.createElement("div",{className:"ZEleA-Panel-content",ref:P,style:F},m?!b&&p:p))}var E=t("sB9r"),y=t("D4a5"),I=c["Flex"].FlexItem,A=function(e){var a=e.data,t=e.indexData,l=e.operation,i=e.format;return r.a.createElement(c["Flex"],null,a.image?r.a.createElement(I,null,r.a.createElement(E["a"],{width:85,height:100,border:!0,value:a.image})):r.a.createElement(r.a.Fragment,null),r.a.createElement(I,{className:"padding-left",flex:1},r.a.createElement("div",{className:"list"},a.imageTitle?r.a.createElement("div",null,r.a.createElement("span",{className:"weight"},a.imageTitle)):r.a.createElement(r.a.Fragment,null),r.a.createElement(y["Render"],{n:"plain",data:t,options:{format:i},handle:{}}))),r.a.createElement(I,null,r.a.createElement("div",null,l)))},O=t("5zUa"),P=t("Nbnn"),x=t("cIDR"),j=c["Flex"].FlexItem,h=function(e){var a=e.data,t=void 0===a?{}:a,l=e.map,i=void 0===l?{}:l,n=e.namespace,d=e.operation,s=e.format,m=e.handle,p=e.index,u=Object(x["useModel"])(n),f=Object(o["useMemo"])(e=>Array.isArray(d)?Object(P["a"])([],d,m,{namespace:n,model:u}).columns[0].render:e=>null,[d]),v={title:Object(O["formatAPI"])(i.title,{namespace:n,data:t}),subTitle:Object(O["formatAPI"])(i.subTitle,{namespace:n,data:t}),image:Object(O["formatAPI"])(i.image,{namespace:n,data:t}),imageTitle:Object(O["formatAPI"])(i.imageTitle,{namespace:n,data:t})};return r.a.createElement(b,{collapseIcon:!1,title:r.a.createElement(c["Flex"],null,r.a.createElement(j,null,v.title),r.a.createElement(j,{flex:1,className:"padding-left weight-400"},v.subTitle))},r.a.createElement(A,{data:v,indexData:{text:"",record:t,index:p,type:""},format:s,operation:f("",p,t)}))};t("qYX+");function F(e){var a=e.data,t=e.field,l=e.map,i=e.namespace,n=e.api,o=e.operation,c=e.format,d={items:[{component:"ItemList",config:{API:{listAPI:n},fields:[]}}]},s=a&&t?a[t]:void 0;return r.a.createElement("div",{className:"c-ImageCardList"},r.a.createElement(f.a,{namespace:i,config:d,operation:o,format:c,map:l,Item:h,data:s,pagination:!Boolean(s)}))}t("T2oS");var T=t("W9HT"),N=t("lIdm"),w=(t("a6mf"),function(e){var a=e.api,t=e.fieldsMap,l=void 0===t?{}:t,i=e.children,c=Object(o["useState"])([]),d=Object(n["a"])(c,2),s=d[0],m=d[1],p=Object(o["useState"])(!1),u=Object(n["a"])(p,2),f=u[0],v=u[1],g=l.status,b=void 0===g?{}:g,E=b.map,y=void 0===E?{}:E;return Object(o["useEffect"])(e=>{v(!0),Object(N["b"])(Object(O["formatAPI"])(a,{})).then(e=>{m(e)}).finally(e=>v(!1))},[a]),r.a.createElement(T["a"],{spinning:f},r.a.createElement("div",{className:"list Details-statusList"},s.map((e,a)=>r.a.createElement("div",{className:"time",key:a},r.a.createElement("div",{className:"label"},y[e.status]||e.status),r.a.createElement("div",{className:"value"},r.a.createElement("pre",null,e.note))))),i)}),D=(t("XEnU"),t("0al3"),t("45dX"));t("LvDl");function _(e){var a=e.namespace,t=e.API,l=e.col,i=void 0===l?2:l,o=(e.data,e.loading,e.label),c=e.span,d=void 0===c?12:c;console.log("preview data = ",e.data);var s=Object(p["a"])(a,t),m=Object(n["a"])(s,2);m[0],m[1];return r.a.createElement(D["Render"],{n:"Grid",value:Array(i).fill(~~(24/i))},r.a.createElement("div",{key:"preview_file_index",span:d,className:"Details-item"},o?r.a.createElement("div",{className:"Details-labelTitle"},o," :"):null,r.a.createElement("div",null,"TODO \u5bf9\u63a5\u9884\u89c8\u7ec4\u4ef6")))}var C=c["Flex"].FlexItem,G={plain:m["a"],cardList:F,statusLog:w,previewFile:_};a["a"]=function(e){var a=e.namespace,t=e.setting,l=e.config,i=Object(p["a"])(a,t.getAPI),o=Object(n["a"])(i,2),d=o[0],s=o[1],m=l.left,u=void 0===m?[]:m,f=l.right,v=void 0===f?[]:f,g={loading:s,fieldsMap:t.map,col:t.columns,data:d};return r.a.createElement(c["Flex"],{align:"flex-start"},u.length>0?r.a.createElement(C,{flex:1},u.map(e=>L(a,e,g)),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(r.a.Fragment,null),v.length>0?r.a.createElement(C,{className:"Details-other"},v.map(e=>L(a,e,g))):r.a.createElement(r.a.Fragment,null),Array.isArray(l)&&l.length>0?r.a.createElement(C,{flex:1},l.map(e=>(e.fields=d.layoutJson?d.layoutJson:e.fields,L(a,e,g))),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(r.a.Fragment,null))};function L(e,a,t){var n=a.title,c=a.type,d=Object(i["a"])(a,["title","type"]),m=G[c];return m?r.a.createElement(o["Fragment"],{key:"".concat(n,"-").concat(c)},r.a.createElement(s,{title:n},r.a.createElement(m,Object(l["a"])({},t,d,{namespace:e})))):"\u672a\u77e5\u7684 view type: ".concat(c)}},G1nR:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var l=t("XEnU"),i=t("SIvP"),n=(t("T2oS"),t("W9HT")),o=(t("+L6B"),t("2/Rp")),r=t("k16G"),c=t("q1tI"),d=t.n(c),s=(t("Pm34"),t("Rrod")),m=t.n(s),p=t("GG5U"),u=t("0al3"),f=t("45dX"),v=(t("a6mf"),t("LvDl")),g=t.n(v);function b(e){var a=e.namespace,t=e.API,l=e.col,i=void 0===l?2:l,c=e.fields,s=void 0===c?[]:c,u=e.fieldsMap,v=void 0===u?{}:u,g=e.goBack,b=void 0!==g&&g,y=e.data,I=e.loading,A=Object(p["a"])(a,t),O=Object(r["a"])(A,2),P=O[0],x=O[1],j=y||P;return d.a.createElement(n["a"],{spinning:I||x},b&&m.a.goBack?d.a.createElement(d.a.Fragment,null,d.a.createElement(o["a"],{onClick:m.a.goBack},"\u8fd4\u56de")):null,d.a.createElement(f["Render"],{n:"Grid",value:Array(i).fill(~~(24/i))},s.map((e,a)=>{var t=e.label;return d.a.createElement("div",{key:a,span:e.span,className:"Details-item"},t?d.a.createElement("div",{className:"Details-labelTitle"},t," :"):null,E(j,e,v))})))}function E(e,a,t){var n=a.field,o=a.options,r=Object(i["a"])(a,["field","options"]),c=Object(l["a"])(Object(l["a"])({},o),r);return t&&t[n]&&(c.map=t[n].map),d.a.createElement(u["Render"],{n:"plain",className:"Details-valueContainer",options:c,value:g.a.get(e,n),formdata:e})}},GG5U:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var l=t("cIDR"),i=t("1cYI");function n(e,a){var t=Object(l["useModel"])({namespace:e}),n=t.formData,o=void 0===n?{}:n,r=t.loading;function c(){a&&t.fetchOne({API:a})}function d(){}return Object(i["useDidMount"])(c),Object(i["useWillUnmount"])(d),[o,r]}},Mdr6:function(e,a,t){},T65D:function(e,a,t){},a6mf:function(e,a,t){},"qYX+":function(e,a,t){},s9KF:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),i=t.n(l),n=t("AyJi"),o=t("034Z");a["default"]=()=>i.a.createElement(n["a"],{namespace:"fileManage_view",setting:o,config:o.viewConfig})}}]);