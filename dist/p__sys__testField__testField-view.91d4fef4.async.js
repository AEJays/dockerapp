(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[129],{AyJi:function(e,t,a){"use strict";var l=a("IIKO"),n=a("SIvP"),i=a("k16G"),r=a("q1tI"),c=a.n(r),s=a("uuO6"),m=(a("Mdr6"),s["Flex"].FlexItem),o=function(e){var t=e.title,a=e.children,l=c.a.Children.toArray(a),n=Object(i["a"])(l,2),r=n[0],o=n[1];return c.a.createElement("div",{className:"c-Card"},c.a.createElement(s["Flex"],{className:"content"},c.a.createElement(m,null,c.a.createElement("div",{className:"title"},t)),c.a.createElement("div",{className:"fill"}),c.a.createElement(m,{flex:1},o)),r)},d=a("G1nR"),u=a("GG5U"),p=a("Pm34"),f=a.n(p),v=a("8Skl"),E=(a("T65D"),s["Flex"].FlexItem);function b(e){var t=e.title,a=e.defaultCollapse,l=void 0!==a&&a,n=e.collapseIcon,m=void 0===n||n,o=e.delayed,d=void 0!==o&&o,u=e.children,p=Object(r["useState"])(l),f=Object(i["a"])(p,2),b=f[0],g=f[1],O=Object(r["useReducer"])(e=>e+1,0),y=Object(i["a"])(O,2),j=y[0],I=y[1],h=Object(r["useRef"])(null),x=Object(r["useRef"])(void 0),F=Object(r["useMemo"])(e=>b?[{height:0,padding:0},{transform:"rotate(180deg)"}]:[{height:x.current,padding:void 0},{transform:void 0}],[b,j]),A=Object(i["a"])(F,2),N=A[0],P=A[1];function w(){b||(x.current=h.current.clientHeight),g(!b)}return Object(r["useEffect"])(e=>{b||setTimeout(e=>{x.current=void 0,I()},200)},[b]),c.a.createElement("div",{className:"ZEleA-Panel"},c.a.createElement(s["Flex"],{className:"ZEleA-Panel-title"},m?c.a.createElement(E,{className:"ZEleA-Panel-icon",onClick:w,style:P},c.a.createElement(v["a"],{type:"down"})):null,c.a.createElement(E,{flex:1},c.a.createElement("div",null,t))),c.a.createElement("div",{className:"ZEleA-Panel-content",ref:h,style:N},d?!b&&u:u))}var g=a("sB9r"),O=a("D4a5"),y=s["Flex"].FlexItem,j=function(e){var t=e.data,a=e.indexData,l=e.operation,n=e.format;return c.a.createElement(s["Flex"],null,t.image?c.a.createElement(y,null,c.a.createElement(g["a"],{width:85,height:100,border:!0,value:t.image})):c.a.createElement(c.a.Fragment,null),c.a.createElement(y,{className:"padding-left",flex:1},c.a.createElement("div",{className:"list"},t.imageTitle?c.a.createElement("div",null,c.a.createElement("span",{className:"weight"},t.imageTitle)):c.a.createElement(c.a.Fragment,null),c.a.createElement(O["Render"],{n:"plain",data:a,options:{format:n},handle:{}}))),c.a.createElement(y,null,c.a.createElement("div",null,l)))},I=a("5zUa"),h=a("Nbnn"),x=a("cIDR"),F=s["Flex"].FlexItem,A=function(e){var t=e.data,a=void 0===t?{}:t,l=e.map,n=void 0===l?{}:l,i=e.namespace,m=e.operation,o=e.format,d=e.handle,u=e.index,p=Object(x["useModel"])(i),f=Object(r["useMemo"])(e=>Array.isArray(m)?Object(h["a"])([],m,d,{namespace:i,model:p}).columns[0].render:e=>null,[m]),v={title:Object(I["formatAPI"])(n.title,{namespace:i,data:a}),subTitle:Object(I["formatAPI"])(n.subTitle,{namespace:i,data:a}),image:Object(I["formatAPI"])(n.image,{namespace:i,data:a}),imageTitle:Object(I["formatAPI"])(n.imageTitle,{namespace:i,data:a})};return c.a.createElement(b,{collapseIcon:!1,title:c.a.createElement(s["Flex"],null,c.a.createElement(F,null,v.title),c.a.createElement(F,{flex:1,className:"padding-left weight-400"},v.subTitle))},c.a.createElement(j,{data:v,indexData:{text:"",record:a,index:u,type:""},format:o,operation:f("",u,a)}))};a("qYX+");function N(e){var t=e.data,a=e.field,l=e.map,n=e.namespace,i=e.api,r=e.operation,s=e.format,m={items:[{component:"ItemList",config:{API:{listAPI:i},fields:[]}}]},o=t&&a?t[a]:void 0;return c.a.createElement("div",{className:"c-ImageCardList"},c.a.createElement(f.a,{namespace:n,config:m,operation:r,format:s,map:l,Item:A,data:o,pagination:!Boolean(o)}))}a("T2oS");var P=a("W9HT"),w=a("lIdm"),D=(a("a6mf"),function(e){var t=e.api,a=e.fieldsMap,l=void 0===a?{}:a,n=e.children,s=Object(r["useState"])([]),m=Object(i["a"])(s,2),o=m[0],d=m[1],u=Object(r["useState"])(!1),p=Object(i["a"])(u,2),f=p[0],v=p[1],E=l.status,b=void 0===E?{}:E,g=b.map,O=void 0===g?{}:g;return Object(r["useEffect"])(e=>{v(!0),Object(w["b"])(Object(I["formatAPI"])(t,{})).then(e=>{d(e)}).finally(e=>v(!1))},[t]),c.a.createElement(P["a"],{spinning:f},c.a.createElement("div",{className:"list Details-statusList"},o.map((e,t)=>c.a.createElement("div",{className:"time",key:t},c.a.createElement("div",{className:"label"},O[e.status]||e.status),c.a.createElement("div",{className:"value"},c.a.createElement("pre",null,e.note))))),n)}),T=(a("XEnU"),a("0al3"),a("45dX"));a("LvDl");function k(e){var t=e.namespace,a=e.API,l=e.col,n=void 0===l?2:l,r=(e.data,e.loading,e.label),s=e.span,m=void 0===s?12:s;console.log("preview data = ",e.data);var o=Object(u["a"])(t,a),d=Object(i["a"])(o,2);d[0],d[1];return c.a.createElement(T["Render"],{n:"Grid",value:Array(n).fill(~~(24/n))},c.a.createElement("div",{key:"preview_file_index",span:m,className:"Details-item"},r?c.a.createElement("div",{className:"Details-labelTitle"},r," :"):null,c.a.createElement("div",null,"TODO \u5bf9\u63a5\u9884\u89c8\u7ec4\u4ef6")))}var R=s["Flex"].FlexItem,G={plain:d["a"],cardList:N,statusLog:D,previewFile:k};t["a"]=function(e){var t=e.namespace,a=e.setting,l=e.config,n=Object(u["a"])(t,a.getAPI),r=Object(i["a"])(n,2),m=r[0],o=r[1],d=l.left,p=void 0===d?[]:d,f=l.right,v=void 0===f?[]:f,E={loading:o,fieldsMap:a.map,col:a.columns,data:m};return c.a.createElement(s["Flex"],{align:"flex-start"},p.length>0?c.a.createElement(R,{flex:1},p.map(e=>C(t,e,E)),c.a.createElement("br",null),c.a.createElement("br",null)):c.a.createElement(c.a.Fragment,null),v.length>0?c.a.createElement(R,{className:"Details-other"},v.map(e=>C(t,e,E))):c.a.createElement(c.a.Fragment,null),Array.isArray(l)&&l.length>0?c.a.createElement(R,{flex:1},l.map(e=>(e.fields=m.layoutJson?m.layoutJson:e.fields,C(t,e,E))),c.a.createElement("br",null),c.a.createElement("br",null)):c.a.createElement(c.a.Fragment,null))};function C(e,t,a){var i=t.title,s=t.type,m=Object(n["a"])(t,["title","type"]),d=G[s];return d?c.a.createElement(r["Fragment"],{key:"".concat(i,"-").concat(s)},c.a.createElement(o,{title:i},c.a.createElement(d,Object(l["a"])({},a,m,{namespace:e})))):"\u672a\u77e5\u7684 view type: ".concat(s)}},G1nR:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var l=a("XEnU"),n=a("SIvP"),i=(a("T2oS"),a("W9HT")),r=(a("+L6B"),a("2/Rp")),c=a("k16G"),s=a("q1tI"),m=a.n(s),o=(a("Pm34"),a("Rrod")),d=a.n(o),u=a("GG5U"),p=a("0al3"),f=a("45dX"),v=(a("a6mf"),a("LvDl")),E=a.n(v);function b(e){var t=e.namespace,a=e.API,l=e.col,n=void 0===l?2:l,s=e.fields,o=void 0===s?[]:s,p=e.fieldsMap,v=void 0===p?{}:p,E=e.goBack,b=void 0!==E&&E,O=e.data,y=e.loading,j=Object(u["a"])(t,a),I=Object(c["a"])(j,2),h=I[0],x=I[1],F=O||h;return m.a.createElement(i["a"],{spinning:y||x},b&&d.a.goBack?m.a.createElement(m.a.Fragment,null,m.a.createElement(r["a"],{onClick:d.a.goBack},"\u8fd4\u56de")):null,m.a.createElement(f["Render"],{n:"Grid",value:Array(n).fill(~~(24/n))},o.map((e,t)=>{var a=e.label;return m.a.createElement("div",{key:t,span:e.span,className:"Details-item"},a?m.a.createElement("div",{className:"Details-labelTitle"},a," :"):null,g(F,e,v))})))}function g(e,t,a){var i=t.field,r=t.options,c=Object(n["a"])(t,["field","options"]),s=Object(l["a"])(Object(l["a"])({},r),c);return a&&a[i]&&(s.map=a[i].map),m.a.createElement(p["Render"],{n:"plain",className:"Details-valueContainer",options:s,value:E.a.get(e,i),formdata:e})}},GG5U:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var l=a("cIDR"),n=a("1cYI");function i(e,t){var a=Object(l["useModel"])({namespace:e}),i=a.formData,r=void 0===i?{}:i,c=a.loading;function s(){t&&a.fetchOne({API:t})}function m(){}return Object(n["useDidMount"])(s),Object(n["useWillUnmount"])(m),[r,c]}},Mdr6:function(e,t,a){},T65D:function(e,t,a){},Xxlx:function(e,t,a){"use strict";a.r(t);var l=a("q1tI"),n=a.n(l),i=a("AyJi"),r=a("eOWL");t["default"]=()=>n.a.createElement(i["a"],{namespace:"testField_view",setting:r,config:r.viewConfig})},a6mf:function(e,t,a){},eOWL:function(e){e.exports=JSON.parse('{"pageName":{"table":"\u81ea\u5b9a\u4e49\u5b57\u6bb5","new":"","edit":""},"listAPI":"/api/crud/test/tests","createAPI":"/api/crud/test/tests","getAPI":"/api/crud/test/tests/[id]","updateAPI":"/api/crud/test/tests/[id]","deleteAPI":"/api/crud/test/tests/(id)","columns":1,"createFields":[{"label":"\u540d\u5b57","rules":[{"type":"required"}],"props":{"placeholder":"\u8bf7\u8f93\u5165"},"type":"input","field":"name"}],"updateFields":[{"label":"\u540d\u5b57","rules":[{"type":"required"}],"props":{"placeholder":"\u8bf7\u8f93\u5165"},"type":"input","field":"name"}],"map":{},"layout":{"table":"Content","form":"TitleContent"},"tableActions":[{"title":"\u6dfb\u52a0","type":"path","options":{"outside":true,"style":"primary","path":"testField/testField-add"},"expect":{"permission":""}},{"title":"\u5bfc\u5165","type":"import-modal","options":{"modalTitle":"\u5bfc\u5165","modalWidth":600,"templateUrl":"/attachments/\u6d4b\u8bd5\u6a21\u677f.xlsx","name":"tests"}}],"tableOperation":[{"title":"\u67e5\u770b\u8be6\u60c5","type":"path","options":{"outside":true,"path":"testField/testField-view"}},{"title":"\u7f16\u8f91","type":"path","options":{"outside":true,"path":"testField/testField-edit"}},{"title":"\u5220\u9664","type":"delete","options":{"outside":false},"expect":{"permission":""}}],"searchFields":[{"label":"\u540d\u5b57","field":"name","type":"input","props":{"placeholder":""}}],"tableFields":[{"label":"\u6807\u8bc6","field":"id"},{"label":"\u540d\u5b57","field":"name"}],"viewConfig":[{"title":"\u8be6\u60c5","type":"plain","fields":[{"label":"\u540d\u5b57","field":"name"},{"label":"\u6807\u8bc6","field":"entityName"},{"label":"\u8868\u540d","field":"tableName"},{"label":"\u5907\u6ce8","field":"note"}]}]}')},"qYX+":function(e,t,a){}}]);